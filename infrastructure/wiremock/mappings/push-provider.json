{
  "mappings": [
    {
      "priority": 1,
      "scenarioName": "Primary Push Provider with failures",
      "requiredScenarioState": "Started",
      "newScenarioState": "Attempt 2",
      "request": {
        "method": "POST",
        "urlPathTemplate": "/push/primary/send"
      },
      "response": {
        "status": 500,
        "jsonBody": {
          "success": false,
          "error": "Primary provider temporarily unavailable",
          "timestamp": "{{now format='yyyy-MM-dd HH:mm:ss'}}"
        },
        "headers": {
          "Content-Type": "application/json"
        },
        "transformers": ["response-template"]
      }
    },
    {
      "priority": 2,
      "request": {
        "method": "POST",
        "urlPathTemplate": "/push/primary/send"
      },
      "response": {
        "status": 200,
        "jsonBody": {
          "success": true,
          "messageId": "push-primary-{{randomValue type='UUID'}}",
          "provider": "Firebase_FCM",
          "cost": 0.002,
          "timestamp": "{{now format='yyyy-MM-dd HH:mm:ss'}}"
        },
        "headers": {
          "Content-Type": "application/json"
        },
        "transformers": ["response-template"],
        "delayDistribution": {
          "type": "uniform",
          "lower": 20,
          "upper": 100
        }
      }
    },
    {
      "priority": 1,
      "request": {
        "method": "POST",
        "urlPathTemplate": "/push/secondary/send"
      },
      "response": {
        "status": 200,
        "jsonBody": {
          "success": true,
          "messageId": "push-secondary-{{randomValue type='UUID'}}",
          "provider": "OneSignal",
          "cost": 0.008,
          "timestamp": "{{now format='yyyy-MM-dd HH:mm:ss'}}"
        },
        "headers": {
          "Content-Type": "application/json"
        },
        "transformers": ["response-template"],
        "delayDistribution": {
          "type": "uniform",
          "lower": 20,
          "upper": 50
        }
      }
    }
  ]
}

